### VPC 생성하기

1. VPC > VPC 생성
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/5c3f1721-56b0-4dcf-8149-80c7027606a8/Untitled.png)
    
2. VPC 생성 정보 입력(이름 및 IPv4 CIDR) > VPC 생성
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/87c7c61c-a2a7-4acf-918f-7e7ac9b7d2b0/Untitled.png)
    
3. 서브넷 생성 > 서브넷 설정 (8개) > 서브넷 생성
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/07073466-0d6e-49b4-bebd-d651f3357b3e/Untitled.png)
    
    - 서브넷 이름
        
        Ji-Bastion-Pub-A 10.101.1.0/24
        Ji-WEB-Pri-A 10.101.2.0/24
        Ji-WAS-Pri-A 10.101.3.0/24
        Ji-DB-Pri-A 10.101.4.0/24
        Ji-NAT-Pub-C 10.101.11.0/24
        Ji-WEB-Pri-C 10.101.12.0/24
        Ji-WAS-Pri-C 10.101.13.0/24
        Ji-DB-Pri-C 10.101.14.0/24
        
    - 서브넷 설정
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/39e85e56-f8e7-4cb5-a022-77a63342bf5e/Untitled.png)
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/1020ce53-756e-437a-af21-20c856d7e1e1/Untitled.png)
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/309b7bca-e770-4c9a-b6b2-5b767e492a10/Untitled.png)
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/9f8f1831-9860-4884-8bc6-ae6f54ff9d18/Untitled.png)
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/59c51f1a-0aa1-460f-b027-9aacec815de4/Untitled.png)
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/f26b64bd-c173-4e22-96dc-7ffa1e09f3d7/Untitled.png)
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/d5c3b990-5847-4508-9908-51cf43a7a93b/Untitled.png)
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/b022853c-1b92-422a-8cd0-79b38e6f1975/Untitled.png)
        
4. 생성된 서브넷 확인
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/11f5de69-bb57-49b0-b52f-597e283f03ea/Untitled.png)
    

### 인터넷 게이트웨이 생성하기

1. 인터넷 게이트웨이 > 인터넷 게이트웨이 생성
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/f54d4e0d-e672-420c-a0f7-d219526a0567/Untitled.png)
    
2. 이름 태그 설정 > 인터넷 게이트웨이 생성
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/0c69d427-3724-42b8-9f98-8a181267ba58/Untitled.png)
    
3. 인터넷 게이트웨이 생성 확인
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/ca12aa0c-3d38-49b0-89c2-1f24f881652e/Untitled.png)
    
4. 인터넷 게이트웨이랑 VPC 연결: 생성한 IGW 선택 > VPC에 연결
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/c7465949-8c83-4537-8d42-c43feccc9c43/Untitled.png)
    
5. VPC에 연결 > 사용 가능한 VPC 선택 (Ji-IGW) > 인터넷 게이트웨이 연결 
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/23be5392-f2e4-48c1-9642-298ddd3195f5/Untitled.png)
    
6. 인터넷 게이트웨이와 VPC 연결된 것 확인
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/95b2af3b-ce7c-47dc-bee3-1a6ffa7297c0/Untitled.png)
    

### 라우팅 테이블 생성하기

1. 라우팅 테이블 생성하기
    
    : 기본으로 생성되어있는 RT → Pri로 이름 변경
    
    : 새로 RT 생성 → Pub으로 생성
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/00fa8acd-af8f-475d-bec7-fe68245ab9fe/Untitled.png)
    
2. 라우팅 테이블 이름 생성 > VPC 연결 > 라우팅 테이블 생성
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/f35a00e3-bdd4-40a7-85a5-70970c06cab9/Untitled.png)
    
3. 라우팅 테이블 생성된 것 확인하기
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/8bdd2535-9840-44f2-a010-6e7e8ae77661/Untitled.png)
    
4. 명시적 서브넷 연결 > 서브넷 연결 편집 (Private)
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/2a1990a9-a5c0-4c38-a80f-438c8927baef/Untitled.png)
    
5. Private으로 연결할 서브넷 연결 편집 > 연결 저장
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/0d9ed5c7-a5c3-4723-bcc5-d0925d3dbb1c/Untitled.png)
    
6. 서브넷 연결 확인 (Private)
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/a26df338-a566-45c4-992d-4fef602fcc2a/Untitled.png)
    
7. 명시적 서브넷 연결 > 서브넷 연결 편집 (Public)
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/0f7453e9-c033-432a-b9f7-ce5d0f85aafc/Untitled.png)
    
8. Public으로 연결할 서브넷 연결 편집 > 연결 저장
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/8cb880fc-5bde-4ce3-9e6c-bc4a0d7a607d/Untitled.png)
    
9. 서브넷 연결 확인 (Public)
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/202a45dd-2ec9-41c8-9d7a-6dd3425b6481/Untitled.png)
    

### IGW와 RT 연결하기

1. 라우팅 테이블 > 라우팅 > 라우팅 편집
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/73ef960b-6701-4b10-bc0b-77d1d061cd03/Untitled.png)
    
2. 라우팅 편집 > 대상: 0.0.0.0/0, 인터넷 게이트웨이, 생성한 IGW(Ji-IGW) > 변경사항 저장
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/309d5ac8-5d45-44d8-9f65-533c9ff94178/Untitled.png)
    

### NAT Gateway 설정하기

1. NAT Gateway에 할당할 EIP 설정하기
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/2e3652d3-4d68-441b-9923-1baa78a093ff/Untitled.png)
    
2. NAT Gateway 생성
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/9902834b-833b-469e-a716-20adca9e8f02/Untitled.png)
    
3. NAT 게이트웨이 생성 정보 입력
    - 이름: Ji-NAT
    - 서브넷: Ji-NAT-Pub-C
        
        → NAT GW는 퍼블릭에 두고 NAT GW를 프라이빗 RT에 연결해서 사용하면 퍼블릭과 프라이빗과 통신 가능
        
    - 연결 유형: 퍼블릭
    - EIP: Ji-NAT-EIP
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/431b6ab6-e35d-4283-b9c0-36e787bcb521/Untitled.png)
    

### 라우팅 테이블 정보 수정하기 (Pri)

1. 기존 Private 라우팅 테이블 > 라우팅 편집
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/faa37300-9180-4502-a376-43e4abff771c/Untitled.png)
    
2. NAT Gateway: 0.0.0.0/0, Ji-NAT
    
    10.101.0.0/16 → 이건 지울 수도 없지만 기본 라우팅 대상임
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/531b9656-280a-4fb3-9f10-a19c6968a4c6/Untitled.png)
    
3. NAT GW 라우팅에 추가된 것 확인
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/2e01efbc-89cd-4ff0-9ddb-58d4dc9426ef/Untitled.png)
    

### VPC 구성 정보 확인하기

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ce50842f-1bf3-482f-9ab9-7434928b1d92/6adcda88-86e5-4932-9d02-6ad35d38811e/Untitled.png)